<!-- CustomerTable.xhtml -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Customers Table</title>
</h:head>
<h:body>
    <div class="card">
        <h:form id="form">
            <p:dataTable id="customers" var="customer" value="#{customerBean.customers}" rowKey="#{customer.id}"
                         selection="#{customerBean.selectedCustomer}" selectionMode="single">
                <f:facet name="header">
                    RightClick to View Options
                </f:facet>

                <p:column headerText="ID">
                    <h:outputText value="#{customer.id}" />
                </p:column>
                <p:column headerText="Name">
                    <h:outputText value="#{customer.name}" />
                </p:column>
                <p:column headerText="National ID">
                    <h:outputText value="#{customer.nationalId}" />
                </p:column>
                <p:column headerText="Phone">
                    <h:outputText value="#{customer.phone}" />
                </p:column>
            </p:dataTable>

            <p:contextMenu for="customers">
                <p:menuitem value="View" update="customerDetail" icon="pi pi-search"
                            oncomplete="PF('customerDialog').show()" actionListener="#{customerBean.viewCustomer}"/>
                <p:menuitem value="Delete" update="customers" icon="pi pi-times"
                            action="#{customerBean.deleteCustomer}"/>
            </p:contextMenu>

            <p:dialog header="Customer Info" widgetVar="customerDialog" modal="true" showEffect="fade"
                      hideEffect="fade" resizable="false">
                <p:outputPanel id="customerDetail" style="text-align:center;">
                    <h:panelGrid columns="2" rendered="#{not empty customerBean.selectedCustomer}">
                        <h:outputText value="Name:" />
                        <h:outputText value="#{customerBean.selectedCustomer.name}" />

                        <h:outputText value="National ID:" />
                        <h:outputText value="#{customerBean.selectedCustomer.nationalId}" />

                        <h:outputText value="Phone:" />
                        <h:outputText value="#{customerBean.selectedCustomer.phone}" />

                        <h:outputText value="Email:" />
                        <h:outputText value="#{customerBean.selectedCustomer.email}" />

                    </h:panelGrid>
                </p:outputPanel>
            </p:dialog>
        </h:form>
    </div>
</h:body>
</html>